import{_ as b}from"./index-127a01d9.js";import{d as N,u as x,r as p,b as w,e as C,M as B,f as L,w as z,o as s,c as l,F as E,g as I,n as o,h as f,i as M,j as h,t as i,k as d,l as m,_ as S,m as D,a as _,p as V,q as g,S as $}from"./index-2ac84a6d.js";import{_ as A}from"./index-289f1f3d.js";/* empty css              */import{_ as F,s as H}from"./index-ffcc03e1.js";import{r as O}from"./index-7a2f8ecb.js";const R=N({__name:"LoadEta",props:{code:{}},setup(y){const v=y,k=x(),c=p(NaN),a=p(null),u=w(()=>(a.value||[]).filter(n=>n.num_people===2||n.num_people===4||n.num_people===6));let e=null;return C(()=>{e=setInterval(()=>{c.value=Date.now()},B*60)}),L(()=>{e&&clearInterval(e)}),z([()=>v.code,c],([r])=>{k.loadEta.execute({id:r}).then(n=>{a.value=n}).catch(()=>null)},{immediate:!0}),(r,n)=>u.value?(s(),l("div",{key:0,class:o(r.$style.eta)},[(s(!0),l(E,null,I(u.value,t=>(s(),l("div",{key:t.num_people,class:o(r.$style.eta__item)},[f(d(A),{appearance:"filled",size:"s",color:"var(--ark-text-color)",background:"var(--ark-text-color-12)"},{default:M(()=>[h(i(t.num_people)+"чел. ~",1),f(F,{date:t.time_difference_minutes},null,8,["date"])]),_:2},1024)],2))),128))],2)):m("",!0)}}),j={$style:H},q=S(R,[["__cssModules",j]]),T=["alt","src"],U={key:1,style:{"text-align":"center",width:"100%"}},G=_("img",{src:b,width:"128",height:"128",alt:"No users",class:"ark-space_bottom-4"},null,-1),J=_("h3",{class:"ark-space_bottom-6 ark-text_h5"},"Нет ресторанов :(",-1),K=[G,J],P=N({__name:"Home",setup(y){const v=x(),k=D(),c=p([]),a=p(!1),u=w(()=>a.value?O:c.value);return C(()=>{a.value=!0,v.loadRestaurants.execute().then(e=>{c.value=e||[]}).catch(([e,r])=>{r!==403&&k.show("Не удалось загрузить рестораны",{type:"error"})}).finally(()=>{a.value=!1})}),(e,r)=>{const n=V("router-link");return s(),l("div",{class:o(e.$style.items)},[u.value.length>0?(s(!0),l(E,{key:0},I(u.value,t=>(s(),g(n,{key:t.code,to:`/restaurant/${t.code}`,class:o([e.$style.rest,a.value&&"ark-skeleton"])},{default:M(()=>[a.value?m("",!0):(s(),l("div",{key:0,class:o(e.$style.rest__surface)},[t.link_to_image?(s(),l("img",{key:0,alt:t.name,src:t.link_to_image},null,8,T)):m("",!0)],2)),_("div",{class:o(e.$style.rest__content)},[_("h5",{class:o(["ark-text_h5",e.$style.rest__name])},i(t.name),3),_("p",{class:o(e.$style.rest__text)},[f(d($),{class:"ark-space_right-2",name:"address",size:16}),h(" "+i(t.address),1)],2),_("p",{class:o(e.$style.rest__text)},[f(d($),{class:"ark-space_right-2",name:"clock",size:16}),h(" "+i(t.opening_time)+" - "+i(t.closing_time),1)],2),a.value?m("",!0):(s(),g(d(q),{key:0,code:t.code},null,8,["code"]))],2)]),_:2},1032,["to","class"]))),128)):(s(),l("div",U,K))],2)}}}),Q="_items_14i8t_1",W="_rest_14i8t_7",X="_rest__name_14i8t_22",Y="_rest__content_14i8t_26",Z="_rest__surface_14i8t_53",ee="_rest__text_14i8t_73",te={items:Q,rest:W,rest__name:X,rest__content:Y,rest__surface:Z,rest__text:ee},se={$style:te},ce=S(P,[["__cssModules",se]]);export{ce as default};

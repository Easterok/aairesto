import{d as f,m as g,r as d,b as x,e as y,o as h,c as k,a,h as l,aC as C,k as r,S as b,t as p,n as c,i as S,j as $,A as z,_ as A}from"./index-5702d411.js";import{P as B}from"./index-4ee99957.js";const I={class:"ark-text_semibold"},M={class:"ark-text_body-xs ark-text_64"},U=f({__name:"UndoAlert",props:{context:{}},setup(v){const o=v,i=g(),n=d(!1),s=d(70),_=x(()=>Math.round(s.value/10));let t=null;const u=()=>{t&&(clearInterval(t),t=null)};y(()=>{t=setInterval(()=>{s.value=s.value-1,s.value===-1&&(u(),o.context.close())},100)});const m=()=>{u(),n.value=!0,o.context.data.callback().then(()=>{i.show("Отменили действие"),o.context.close()}).catch(()=>{i.show("Попробуй еще раз",{type:"error",label:"Не удалось отменить действие"})}).finally(()=>{n.value=!1})};return(e,q)=>(h(),k("div",null,[a("div",{class:c(e.$style.content)},[l(r(b),{style:C({color:e.context.data.iconColor||"var(--ark-alert-icon-color)"}),name:e.context.data.icon||"check"},null,8,["style","name"]),a("span",I,p(e.context.data.title),1)],2),a("div",{class:c(e.$style.content)},[l(r(z),{appearance:"dark",size:"xs",loading:n.value,onClick:m},{default:S(()=>[$(" Отменить ")]),_:1},8,["loading"]),a("p",M," Закроем через "+p(_.value)+" сек ",1)],2),l(r(B),{size:"xs",class:c(e.$style.progress),value:s.value,max:70},null,8,["class","value"])]))}}),w="_content_1uqgf_1",N="_progress_1uqgf_10",P={content:w,progress:N},V={$style:P},E=A(U,[["__cssModules",V]]);export{E as U};

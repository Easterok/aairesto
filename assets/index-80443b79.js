import{al as U,d as J,a3 as Q,R as tt,r as X,ai as et,e as nt,p as ot,o as g,c as b,a as y,t as st,k as c,h,W as L,j as $,l as B,F as R,g as at,q,af as rt,i as it,n as N,_ as ct}from"./index-4bb58793.js";import{P as lt}from"./index-176adada.js";const w=new Map;function dt(e,{value:t}){let o=null;function r(s){o===null&&(s.stopPropagation(),s.preventDefault(),o=s,t.onPanning(!0))}function a(s){if(!o||o.pointerId!==s.pointerId)return;s.stopPropagation(),s.preventDefault();const m=s.clientX-o.clientX,u=s.clientY-o.clientY;t.onEvent([m,u]),o=s}function i(s){s.pointerId===(o==null?void 0:o.pointerId)&&(s.stopPropagation(),s.preventDefault(),o=null,t.onPanning(!1))}e.addEventListener("pointerdown",r),document.addEventListener("pointermove",a),document.addEventListener("pointerup",i),w.set(e,[r,a,i])}function ut(e){const t=w.get(e);t&&(e.removeEventListener("pointerdown",t[0]),document.removeEventListener("pointermove",t[1]),document.removeEventListener("pointerup",t[2]),w.delete(e))}const Ct={mounted:dt,beforeUnmount:ut},M=new Map;function V(e,t){return Math.sqrt(Math.pow(e.cx-t.cx,2)+Math.pow(e.cy-t.cy,2))}function A(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function pt(e,{value:t}){let o=0,r=t.matrix.value.scale,a=[],i={x:0,y:0};function s(n){if(u(n),a.push({id:n.pointerId,x:n.offsetX,y:n.offsetY,cx:n.clientX,cy:n.clientY}),a.length>1){const d=a[0],l=a[1];o=V(d,l),r=t.matrix.value.scale,i=A(d,l)}}function m(n){if(a.length<2)return;n.preventDefault(),n.stopPropagation(),a=a.map(Y=>Y.id===n.pointerId?{id:n.pointerId,x:n.offsetX,y:n.offsetY,cx:n.clientX,cy:n.clientY}:Y);const d=a[0],l=a[1],_=V(d,l),x=r*_/o,p=U(x,.6,5),k=t.matrix.value.translate,E=k.x,K=k.y,f=A(d,l),D=.1+(p-.6)*(2-.6)/(5-.6),W=(f.x-i.x)*D,Z=(f.y-i.y)*D,P=t.matrix.value.scale,j=E+W,H=K+Z,O=p/P*(j-f.x)+f.x,G=p/P*(H-f.y)+f.y;t.onEvent(p,O,G)}function u(n){a=a.filter(({id:d})=>d!==n.pointerId),t.onRelease()}function v(n){if(n.shiftKey)return;n.stopPropagation(),n.preventDefault();const d=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail));let l=Math.abs(n.deltaY)/50;l=d<0?-l:l;const _=t.matrix.value.scale,x=U(_+l,1,5),p=t.matrix.value.translate,k=x/_*(p.x-n.offsetX)+n.offsetX,E=x/_*(p.y-n.offsetY)+n.offsetY;t.onEvent(x,k,E)}function C(n){n.cancelable&&(n.preventDefault(),n.stopPropagation())}e.addEventListener("pointerdown",s),e.addEventListener("pointermove",m),document.addEventListener("pointerup",u),e.addEventListener("pointercancel",u),e.addEventListener("touchmove",C),e.addEventListener("wheel",v),M.set(e,[s,m,u,C,v])}function ft(e){const t=M.get(e);t&&(e.removeEventListener("pointerdown",t[0]),e.removeEventListener("pointermove",t[1]),document.removeEventListener("pointerup",t[2]),e.removeEventListener("pointercancel",t[2]),e.removeEventListener("touchmove",t[3]),e.removeEventListener("wheel",t[4]),M.delete(e))}const Dt={mounted:pt,beforeUnmount:ft},mt={class:"ark-space_bottom-3 ark-text_body-l-2"},vt={key:0,class:"ark-text_body-s-2 ark-text_semibold ark-space_bottom-3"},_t={style:{display:"flex","align-items":"center"}},xt=y("p",{class:"ark-text_body-s-2"},"Размещен на:",-1),gt={class:"ark-text_semibold"},yt=J({__name:"SuccessBook",props:{context:{}},setup(e){const t=e,{context:o}=Q(t);tt(et,X(t.context.data.allTables));const r=X(150);let a=null;const i=()=>{a&&(clearInterval(a),a=null)};return nt(()=>{a=setInterval(()=>{r.value=r.value-1,r.value===-1&&(i(),t.context.close())},100)}),(s,m)=>{const u=ot("RouterLink");return g(),b(R,null,[y("p",mt,st(c(o).data.__frontUpdate?"Бронь обновлена, пересадили на новые столы":"Бронь добавлена"),1),y("div",null,[c(o).data.__frontUpdate?B("",!0):(g(),b("div",vt,[h(L,{today:"",class:"ark-space_bottom-1",mask:"[day:numeric] [month:long] [year:numeric]",date:c(o).data.seating_time},null,8,["date"]),y("div",_t,[h(L,{mask:"[hour:numeric]:[minute:numeric]",date:c(o).data.seating_time},null,8,["date"]),$(" ‐ "),h(L,{mask:"[hour:numeric]:[minute:numeric]",date:c(o).data.end_time},null,8,["date"])])])),xt,y("p",gt,[(g(!0),b(R,null,at(c(o).data.tables,v=>(g(),q(c(rt),{id:v,key:v},null,8,["id"]))),128))]),c(o).data.__newbooking?(g(),q(u,{key:1,class:N(["ark-text_body-s ark-text_semibold",s.$style.link]),to:{query:{...s.$route.query,bookingid:c(o).data.id}},onClick:c(o).close},{default:it(()=>[$(" Открыть редактирование ")]),_:1},8,["class","to","onClick"])):B("",!0)]),h(c(lt),{size:"xs",class:N(s.$style.progress),value:r.value,max:150},null,8,["class","value"])],64)}}}),kt="_link_gpn8l_1",ht="_progress_gpn8l_6",Et={link:kt,progress:ht},bt={$style:Et},Pt=ct(yt,[["__cssModules",bt]]),S="ark-trigger-scroll-to-active",T=new Map;function Lt(e){function t(o){o.stopPropagation();const r=e.clientWidth,a=o.detail,i=a.offsetLeft,s=a.offsetTop;i>r&&e.scrollTo({left:i-52,top:s})}T.set(e,t),e.addEventListener(S,t)}function wt(e){const t=T.get(e);t&&e.removeEventListener(S,t),T.delete(e)}const Yt={mounted:Lt,beforeUnmount:wt},I=new Map;function z(e){const t=I.get(e);t&&clearTimeout(t),I.delete(e)}function F(e,t){if(z(e),t){const o=setTimeout(()=>{e.dispatchEvent(new CustomEvent(S,{bubbles:!0,detail:e}))},100);I.set(e,o)}}function Mt(e,{value:t}){F(e,t)}function Tt(e,{value:t,oldValue:o,modifiers:r}){r.updated&&t!==o&&F(e,t)}const Ut={mounted:Mt,updated:Tt,beforeUnmount:z};export{Pt as S,Ct as T,Dt as Z,Ut as a,Yt as v};
